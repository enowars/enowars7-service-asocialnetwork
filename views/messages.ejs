<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Messages</title>
    <link rel="stylesheet" href="style/messages.css">
    <link rel="stylesheet" href="style/global.css">
    <link rel="stylesheet" href="style/nav.css">
</head>
    <body>
        <nav>
            <div >Icon/Name</div>
            <ul>
                <li> <a href="/">Home</a></li>
                <li> <a href="/profile">Profile</a></li>
                <li> <a href="/messages">Messages</a></li>
                <li> <a href="/logout">Logout</a></li>
            </ul>
        </nav>
        <main>
            <ul>
                <% messages.forEach(messageList => { %>
                    <li>
                        <div class="message-partner"><%= messageList.partner %></div>
                        <div class="message-container">
                            <%messageList.messages.forEach(message=> { %>
                                <div >
                                    <% if(message.sender === userName){%>
                                        <div class="message sent"><%= message.message %>
                                            <%= message.createdAt%></div>
                                    <%}else{%>
                                        <div class="message received" style="text-align: right"><%= message.message%>
                                            <%= message.createdAt%></div>
                                    <%}%>

                                </div>
                            <% }) %>
                        </div>
                    </li>
                <% }); %>
            </ul>
            <% if (locals.error) { %>
                <div class="error" style="color: red"> <%= error %> </div>
            <% } %>
            <form method="post" action="/messages">
                <label for="recipient">Recipient</label>
                <input type="text" name="recipient" id="recipient" required><br>
                <label for="message">Message
                    <textarea name="message"></textarea>
                </label>
                <button type="submit">Send</button>
            </form>
        </main>
    </body>
</html>